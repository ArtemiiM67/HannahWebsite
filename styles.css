/* styles.css */
:root{
  --bg0:#06040d;
  --bg1:#0b0616;
  --txt:rgba(255,255,255,.92);
  --muted:rgba(255,255,255,.72);

  --pink:#ff4da6;
  --hot:#ff2d55;
  --vio:#7c4dff;
  --cyan:#2dfcff;
  --gold:#ffd36e;

  --shadow: 0 20px 70px rgba(0,0,0,.45);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 800px at 30% 10%, rgba(124,77,255,.22), transparent 55%),
              radial-gradient(900px 600px at 80% 30%, rgba(255,77,166,.22), transparent 60%),
              radial-gradient(800px 500px at 30% 80%, rgba(45,252,255,.16), transparent 60%),
              linear-gradient(180deg, var(--bg0), var(--bg1));
  color:var(--txt);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  overflow-x:hidden;
  -webkit-tap-highlight-color: transparent;
}

canvas#fx{
  position:fixed; inset:0;
  width:100vw; height:100vh;
  z-index:0;
  pointer-events:none;
}

#heartField{
  position:fixed; inset:0;
  z-index:1;
  pointer-events:none;
  overflow:hidden;
}

.heart{
  position:absolute;
  left: var(--x);
  bottom:-12vh;
  width: 20px; height: 20px;
  transform: translateX(0) scale(var(--s)) rotate(45deg);
  background: var(--c);
  border-radius: 5px;
  filter: drop-shadow(0 6px 12px rgba(0,0,0,.25));
}
.heart::before,.heart::after{
  content:"";
  position:absolute;
  width:100%; height:100%;
  background:inherit;
  border-radius:50%;
}
.heart::before{ left:-50%; top:0; }
.heart::after{ left:0; top:-50%; }

@keyframes rise{
  from{ transform: translateX(0) translateY(0) scale(var(--s)) rotate(45deg); opacity:1;}
  to{
    transform: translateX(var(--drift)) translateY(-120vh) scale(var(--s)) rotate(45deg);
    opacity:0;
  }
}

/* INTRO */
.intro{
  position:fixed; inset:0;
  display:grid; place-items:center;
  z-index:50;
  background: radial-gradient(900px 600px at 50% 20%, rgba(255,77,166,.18), transparent 65%),
              radial-gradient(900px 600px at 50% 75%, rgba(124,77,255,.16), transparent 60%),
              rgba(0,0,0,.55);
  backdrop-filter: blur(10px);
  transition: opacity .5s ease, transform .5s ease;
}
.intro.hidden{ opacity:0; transform: scale(1.02); pointer-events:none; }
.intro-card{
  width:min(92vw, 520px);
  padding:20px 18px;
  border-radius: 22px;
  border:1px solid rgba(255,255,255,.16);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
  box-shadow: var(--shadow);
  text-align:center;
}
.intro-badge{
  display:inline-flex;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.18);
  font-weight:800;
}
.intro-title{
  margin:14px 0 8px;
  font-size: clamp(28px, 6vw, 44px);
  line-height:1.05;
}
.intro-line{ margin:10px 0 14px; color:var(--muted); font-size: 15px; }
.intro-cta{ display:flex; gap:10px; align-items:center; justify-content:center; padding-top:6px; }
.tap{
  padding:10px 12px;
  border-radius:12px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(255,255,255,.08);
  font-weight:900;
}
.tiny{ color:rgba(255,255,255,.65); font-size:12px; }

/* TOPBAR */
.topbar{
  position:fixed; top:0; left:0; right:0;
  z-index:10;
  display:flex; align-items:center; justify-content:space-between;
  padding: max(10px, env(safe-area-inset-top)) 12px 10px;
  gap:10px;
  backdrop-filter: blur(10px);
  background: linear-gradient(180deg, rgba(0,0,0,.50), rgba(0,0,0,.12));
  border-bottom: 1px solid rgba(255,255,255,.08);
}
.brand{ display:flex; align-items:center; gap:10px; font-weight:900; }
.dot{
  width:10px; height:10px; border-radius:50%;
  background: radial-gradient(circle at 30% 30%, white, var(--pink));
  box-shadow: 0 0 22px rgba(255,77,166,.45);
}
.topright{ display:flex; align-items:center; gap:8px; }
.pill{
  font-size:12px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:rgba(255,255,255,.85);
}
.iconbtn{
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color:var(--txt);
  border-radius: 12px;
  padding:10px 12px;
  cursor:pointer;
}
.iconbtn:active{ transform: translateY(1px); }

/* PANEL */
.panel{
  position:fixed; right:0; top:0; height:100%;
  width: min(92vw, 360px);
  z-index:20;
  transform: translateX(102%);
  transition: transform .28s ease;
  background: rgba(10,8,18,.84);
  border-left:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(12px);
}
.panel.open{ transform: translateX(0); }
.panel-head{
  display:flex; align-items:center; justify-content:space-between;
  padding: max(14px, env(safe-area-inset-top)) 12px 12px;
  border-bottom:1px solid rgba(255,255,255,.10);
}
.panel-title{ font-weight:900; }
.panel-body{ padding:12px; display:flex; flex-direction:column; gap:12px; }
.row{ display:grid; grid-template-columns:1fr 1fr; gap:10px; }
.toggle{
  display:flex; align-items:center; gap:10px;
  padding:10px 10px;
  border-radius: 14px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  font-size:13px;
}
.toggle input{ accent-color: var(--pink); }
.slider{
  padding:12px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
}
.slider-top{ display:flex; justify-content:space-between; align-items:center; margin-bottom:8px; }
.mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; opacity:.85; }
.slider input{ width:100%; }
.panel-actions{ display:flex; gap:10px; }

/* BUTTONS */
.btn{
  border:1px solid rgba(255,255,255,.16);
  background: rgba(255,255,255,.06);
  color:var(--txt);
  border-radius: 14px;
  padding:12px 14px;
  font-weight:900;
  cursor:pointer;
}
.btn.small{ padding:10px 12px; font-size:12px; border-radius:12px; }
.btn.primary{
  background: linear-gradient(135deg, rgba(255,77,166,.95), rgba(124,77,255,.92));
  border-color: rgba(255,255,255,.18);
  box-shadow: 0 10px 24px rgba(255,77,166,.18);
}
.btn.ghost{ background: rgba(255,255,255,.05); }
.btn:active{ transform: translateY(1px); }

/* LAYOUT */
.wrap{
  position:relative; z-index:5;
  padding: 74px 12px 92px;
  max-width: 980px;
  margin: 0 auto;
}
.screen{ display:none; }
.screen.active{ display:block; }

.card{
  position:relative;
  border-radius: 22px;
  border:1px solid rgba(255,255,255,.14);
  background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
  box-shadow: var(--shadow);
  overflow:hidden;
  padding: 16px;
}
.card.hero{ padding: 18px 16px; }

.glowring{
  position:absolute; inset:-120px;
  background:
    radial-gradient(closest-side at 35% 30%, rgba(255,77,166,.22), transparent 60%),
    radial-gradient(closest-side at 70% 40%, rgba(124,77,255,.18), transparent 65%),
    radial-gradient(closest-side at 50% 70%, rgba(45,252,255,.14), transparent 70%);
  filter: blur(10px);
  pointer-events:none;
}
.badge{
  display:inline-flex;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.14);
  font-weight:900;
  margin-bottom:10px;
}
.title{
  margin: 6px 0 6px;
  font-size: clamp(26px, 5.6vw, 46px);
  line-height:1.05;
}
.subtitle{
  margin: 0 0 14px;
  color: var(--muted);
  font-size: 15px;
  transition: opacity .22s ease, transform .22s ease;
}

.cta-row{ display:flex; flex-wrap:wrap; gap:10px; margin-top:8px; }
.mini{ display:flex; flex-wrap:wrap; gap:8px; margin-top:14px; }
.chip{
  font-size:12px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color: rgba(255,255,255,.82);
}
.headrow{
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; margin-bottom:10px;
}
.muted{ color: rgba(255,255,255,.72); font-size:13px; }

/* DRAW */
.toolbar{
  display:flex; gap:10px; flex-wrap:wrap;
  align-items:center; justify-content:space-between;
  padding:10px 0 8px;
}
.chips{ display:flex; gap:8px; flex-wrap:wrap; }
.chipbtn{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color:rgba(255,255,255,.86);
  border-radius:999px;
  padding:9px 12px;
  font-weight:900;
  cursor:pointer;
  font-size:12px;
}
.chipbtn.active{
  background: linear-gradient(135deg, rgba(255,77,166,.90), rgba(124,77,255,.86));
  border-color: rgba(255,255,255,.18);
}
.toolright{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
.label{ display:flex; gap:8px; align-items:center; font-size:12px; color:rgba(255,255,255,.76); }
.label input{ width:140px; max-width:36vw; }
.palette{ display:flex; gap:10px; flex-wrap:wrap; padding:10px 0 12px; }
.swatch{
  width:28px; height:28px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.18);
  cursor:pointer;
  box-shadow: 0 10px 20px rgba(0,0,0,.25);
}
.swatch.active{ outline: 2px solid rgba(255,255,255,.75); outline-offset: 2px; }
.canvasWrap{
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);
  overflow:hidden;
}
.canvas{
  width:100%;
  height: min(52vh, 520px);
  display:block;
  touch-action: none;
}

/* GAMES */
.gameTabs{ display:flex; gap:8px; flex-wrap:wrap; margin: 6px 0 10px; }
.tab{
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
  color:rgba(255,255,255,.86);
  border-radius:999px;
  padding:9px 12px;
  font-weight:900;
  cursor:pointer;
  font-size:12px;
}
.tab.active{
  background: linear-gradient(135deg, rgba(45,252,255,.30), rgba(255,77,166,.28));
  border-color: rgba(255,255,255,.20);
}

.scorebar{
  display:flex; flex-wrap:wrap;
  align-items:center; justify-content:space-between;
  gap:10px; padding:10px 0 12px;
}
.scorebox{
  display:flex; gap:10px; flex-wrap:wrap; align-items:center;
  padding:10px 12px;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.05);
}
.scorelabel{ font-size:12px; color:rgba(255,255,255,.72); font-weight:900; }
.score{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, monospace; font-weight:900; }
.gameBtns{ display:flex; flex-wrap:wrap; gap:8px; }

.stage{
  position:relative;
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.12);
  background: rgba(0,0,0,.18);
  overflow:hidden;
}
.overlay{
  position:absolute; inset:0;
  display:grid; place-items:center;
  z-index:5;
  background: rgba(0,0,0,.35);
  backdrop-filter: blur(6px);
}
.overlay.hidden{ display:none; }
.overlay-card{
  width:min(90%, 460px);
  border-radius: 18px;
  border:1px solid rgba(255,255,255,.16);
  background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
  box-shadow: var(--shadow);
  padding: 14px;
  text-align:center;
}
.overlay-title{ font-weight:1000; font-size:18px; }
.overlay-sub{ margin-top:8px; color:rgba(255,255,255,.72); font-size:13px; }
.overlay-hint{ margin-top:10px; font-size:12px; color:rgba(255,255,255,.62); }

/* MEMORY */
.memory.hidden{ display:none; }
.memory{
  position:absolute; inset:0;
  padding:12px;
  z-index:3;
  display:flex;
  flex-direction:column;
  gap:10px;
}
.memoryTop{
  display:flex; justify-content:space-between; align-items:center;
  gap:10px; flex-wrap:wrap;
}
.memoryGrid{
  display:grid;
  grid-template-columns: repeat(4, 1fr);
  gap:10px;
  flex:1;
}
@media (max-width:420px){
  .memoryGrid{ grid-template-columns: repeat(3, 1fr); }
}
.mcard{
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  display:grid;
  place-items:center;
  font-weight:1000;
  font-size: 22px;
  cursor:pointer;
  user-select:none;
  min-height: 64px;
  position:relative;
  overflow:hidden;
}
.mcard::after{
  content:"";
  position:absolute; inset:-40%;
  background: radial-gradient(circle at 30% 30%, rgba(255,77,166,.25), transparent 55%),
              radial-gradient(circle at 70% 60%, rgba(124,77,255,.20), transparent 60%);
  filter: blur(12px);
  opacity:.8;
}
.mcard span{ position:relative; z-index:2; }
.mcard.revealed{
  background: linear-gradient(135deg, rgba(255,77,166,.22), rgba(45,252,255,.14));
  border-color: rgba(255,255,255,.22);
}
.mcard.matched{
  background: linear-gradient(135deg, rgba(255,211,110,.26), rgba(255,77,166,.18));
  border-color: rgba(255,255,255,.22);
  opacity:.95;
}

/* NAV */
.nav{
  position:fixed; left:0; right:0; bottom:0;
  z-index:12;
  display:flex;
  gap:10px;
  padding: 10px 12px max(10px, env(safe-area-inset-bottom));
  backdrop-filter: blur(12px);
  background: linear-gradient(0deg, rgba(0,0,0,.55), rgba(0,0,0,.10));
  border-top: 1px solid rgba(255,255,255,.08);
}
.navbtn{
  flex:1;
  border-radius: 16px;
  border:1px solid rgba(255,255,255,.14);
  background: rgba(255,255,255,.06);
  color:rgba(255,255,255,.9);
  padding: 12px 10px;
  font-weight:1000;
  cursor:pointer;
}
.navbtn.active{
  background: linear-gradient(135deg, rgba(255,77,166,.30), rgba(124,77,255,.26));
  border-color: rgba(255,255,255,.20);
}

/* ECO / NEON */
body.eco .glowring{ opacity:.55; }
body.eco #fx{ filter: saturate(.95) contrast(.98); }
body.eco .heart{ filter: none; }
body.neon{
  background:
    radial-gradient(1200px 800px at 30% 10%, rgba(45,252,255,.20), transparent 55%),
    radial-gradient(900px 600px at 80% 30%, rgba(255,77,166,.24), transparent 60%),
    radial-gradient(800px 500px at 30% 80%, rgba(255,211,110,.14), transparent 60%),
    linear-gradient(180deg, #05040b, #0a0615);
}

/* Accessibility */
@media (prefers-reduced-motion: reduce){
  #fx{ display:none; }
  .heart{ animation: none !important; opacity:.35; }
}
